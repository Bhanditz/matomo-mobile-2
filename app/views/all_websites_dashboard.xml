<Alloy>
    <Collection src="piwikProcessedReport" id="piwikProcessedReport" instance="true"/>
    <Collection src="appAccounts"/>
    
    <Window id="index">
        <RightNavButton platform="ios,mobileweb">
            <Button id="accountsButton" onClick="doChooseAccount"/>
        </RightNavButton>
        
        <Menu id="menu" platform="android">
            <MenuItem id="menuItemAccount" onClick="doChooseAccount" />
        </Menu>

        <View id="loading"><Label id="loadingLabel"></Label></View>
        
        <View id="content" class="container">
            <SearchBar id="searchBar" onReturn="doSearchWebsite" onCancel="doCancelSearchWebsite" platform="android,ios"/>
            <Require src="graph" id="reportGraphCtrl" formFactor="tablet"/>
            <View class="shadow" formFactor="tablet"></View>
            <TableView id="websitesTable" dataCollection="$.piwikProcessedReport" 
                       onClick="doSelectWebsite" dataTransform="formatWebsite">
                <HeaderPullView platform="ios">
                    <Require src="pull_to_refresh" id="pullToRefresh" onRefresh="doRefresh"/>
                </HeaderPullView>

                <TableViewRow modelid="{id}">
                    <Label class="websiteNameLabel" text="{label}" />

                    <View right="10" width="100" layout="vertical" height="SIZE">
                        <View class="space"></View>
                        <Label text="Visits" class="quickInfoName" />
                        <View right="0" layout="horizontal" height="SIZE">
                            <Label text="{nb_visits}" color="{evolution_color}" class="quickInfoValue"/>
                            <Label text=" (" color="{evolution_color}" class="quickInfoValue"/>
                            <Label text="{visits_evolution}" color="{evolution_color}" class="quickInfoValue"/>
                            <Label text=")" color="{evolution_color}" class="quickInfoValue"/>
                        </View>
                        <View class="space"></View>
                    </View>
                </TableViewRow>

            </TableView>
        </View>
    </Window>
</Alloy>